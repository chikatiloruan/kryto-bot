<!-- templates/debug.html -->
{% extends "base.html" %}
{% block content %}
<h4>Full debug</h4>

<div class="mb-3">
  <h6>Tracker debug (raw)</h6>
  <pre style="max-height:360px;overflow:auto" class="bg-black text-light p-2 small">{{ tracker_debug }}</pre>
</div>

<div class="mb-3">
  <h6>Last actions</h6>
  <table class="table table-sm table-dark">
    <thead><tr><th>Time</th><th>Actor</th><th>Action</th><th>Details</th></tr></thead>
    <tbody>
      {% for a in actions %}
      <tr>
        <td>{{ a['ts_iso'] }}</td><td>{{ a['actor'] }}</td><td>{{ a['action'] }}</td><td style="max-width:40ch;word-break:break-all">{{ a['details'] }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="mb-3">
  <h6>Last visits</h6>
  <table class="table table-sm table-dark">
    <thead><tr><th>Time</th><th>IP</th><th>Path</th><th>UA</th></tr></thead>
    <tbody>
      {% for v in visits %}
      <tr><td>{{ v['ts_iso'] }}</td><td>{{ v['ip'] }}</td><td>{{ v['path'] }}</td><td style="max-width:40ch;word-break:break-all">{{ v['ua'] }}</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
